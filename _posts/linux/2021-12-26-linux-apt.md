---
title: "Apt package manager"
date: 2021-12-26T15:24:54+08:00
tags: ["package manager", "ubuntu"]
categories: ["Linux"]
---

- [itsfoss: apt](https://itsfoss.com/apt-vs-apt-get-difference/)
- [itsfoss: apt commands](https://itsfoss.com/apt-command-guide/)

<!--more-->

## apt vs apt-get

- `apt` command is more suited towards interactive use, including commonly-used commands from `apt-get` and `apt-cache`. And it comes with a nice progress bar.
- `apt-get` is geared towards scripting use due to its stable interface.

## apt-fast parallel package download

[`apt-fast`](https://github.com/ilikenwf/apt-fast) is shellscript wrapper for `apt-get` and `aptitude` that can drastically improve `apt` download times by downloading packages in parallel, with multiple connections per package.

`apt-fast` is a drop-in replacement of `apt-get`. e.g. you can use `sudo apt-fast update`, `sudo apt-fast dist-upgrade`. Should your download stall for any reasons, you'll need to run `apt-fast clean`.


```bash
# Set up apt-fast
sudo add-apt-repository -y ppa:apt-fast/stable
echo debconf apt-fast/maxdownloads string 16 | sudo debconf-set-selections
echo debconf apt-fast/dlflag boolean true | sudo debconf-set-selections
echo debconf apt-fast/aptmanager string apt-get | sudo debconf-set-selections
sudo apt update && sudo apt install apt-fast -y
```

## Synaptic : the GUI package manager

`apt-xapian-index` offers quick filter search box in `synaptic`[^UbuntuHandBook].

[^UbuntuHandBook]: http://ubuntuhandbook.org/index.php/2019/01/enable-quick-filter-search-box-synaptic-package-manager/

```bash
sudo apt install synaptic apt-xapian-index
```

## Fix apt package manager

Try these commands to fix borked apt package registry[^sys76docs].

[^sys76docs]: [System76 docs](https://support.system76.com/articles/package-manager-pop/).

```bash
sudo apt clean
sudo apt update -m
sudo dpkg --configure -a
sudo apt install -f
sudo apt dist-upgrade
sudo apt autoremove --purge
```

## Deprecation of `apt-key` command

> Use of `apt-key` is deprecated according to the [Debian manpage](https://manpages.debian.org/testing/apt/apt-key.8.en.html)

One may receive a `apt-key add is deprecated` message from Ubuntu 20.10 and onwards when adding keys from 3rd party repos.

To brace for the future, instead of this

```bash
wget -qO- https://repo.vivaldi.com/archive/linux_signing_key.pub | sudo apt-key add -
```

Do this

```bash
curl -fsSL https://repo.vivaldi.com/archive/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/vivaldi-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/vivaldi-keyring.gpg] https://repo.vivaldi.com/archive/deb/ stable main" | sudo tee /etc/apt/sources.list.d/vivaldi.list > /dev/null
```

- Text key files (`.asc`) should be converted to binary ones by `gpg --dearmor`.
- In the apt list, use `[signed-by=/path/to/key.gpg]` to specify where the keyring is.
